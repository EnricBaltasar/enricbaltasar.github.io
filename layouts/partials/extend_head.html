{{- /* Avatar size */ -}}
<style>
  ::selection { background: rgba(245, 200, 80, 0.45); }
  .home-page .entry-content .avatar { width: 120px; height: 120px; object-fit: cover; }
  .home-page .entry-content { margin-top: 0; }
  .pseudo-h3 { font-family: var(--ignite-font); font-size: 1.625em; font-weight: 600; margin-bottom: 0; margin-top: 0; }
  .home-page { padding: 1.5em 8% 2.25em; max-width: none; margin: 1.5em auto; }
  @media all and (min-width: 50em) { .home-page { padding: 2.25em 14.333%; } }
  @media all and (min-width: 56.25em) { .home-page { padding: 2.25em 13.333%; } }
  @media all and (min-width: 62.5em) { .home-page { padding-top: 3em; } }
  @media all and (min-width: 68.75em) { .home-page { margin: 3em 0; padding: 3em 12.5% 2.25em; } }
  .footer-title { font-size: 1.625em; line-height: 1.85; margin: 0; font-weight: 500; }
  .site-title { font-weight: 500; }
  .entry #comments.post-comments { background: none; margin: 0; padding: 0; max-width: none; }
  .author-box { display: flex; gap: 1.25em; align-items: flex-start; margin-top: 2em; }
  .author-box-avatar { width: 72px; height: 72px; border-radius: 50%; object-fit: cover; flex-shrink: 0; }
  .author-box-info { flex: 1; }
.author-box-name { display: block; font-size: 1.05em; font-weight: 600; }
  .author-box-bio { margin: 0.3em 0 0; font-size: 0.9em; opacity: 0.8; }
  .author-box-social { margin-top: 0.3em; }
  .post-comments .comments-heading { border-top: solid 2px var(--ignite-border); padding-top: 1.375em; font-size: 1.625em; line-height: 1.85; margin-top: 2em; margin-bottom: 0; font-weight: 600; }
  @media all and (min-width: 50em) { .menu-primary-items a { font-weight: 500; } }
  /* Mobile header: flexbox layout, title left, burger right */
  @media all and (max-width: 49.999em) {
    .site-header {
      display: flex;
      align-items: center;
      padding: 0.75em 6%;
      min-height: 0;
    }
    .site-header:after { display: none; }
    .title-info { float: none; flex: 1; order: 1; }
    .title-info:after { display: none; }
    .toggle-navigation { order: 2; font-size: 1.25em; line-height: 1; }
    .site-title { float: none; font-size: 1.125em; line-height: 1.4; }
    .site-title a:only-child { margin-top: 0; }
    .menu-primary { left: auto; right: 0; transform: none !important; display: none; transition: none; padding-top: 1em; }
    .menu-primary-items a { margin: 0.75em 0; }
    .site-header.toggled .menu-primary { display: block; }
    .main, .breadcrumbs { transform: none !important; }
  }
  /* Breadcrumbs: match .main content width, tight spacing */
  .breadcrumbs { max-width: 750px; margin: 0 auto; padding: 1.5em 3.703% 0; }
  .overflow-container .breadcrumbs ~ .main { padding-top: 0.25em; }
  @media all and (min-width: 37.5em) { .breadcrumbs { padding: 1.5em 7.407% 0; } }
  @media all and (min-width: 50em) { .breadcrumbs { padding: 1.5em 11.11% 0; } }
  @media all and (min-width: 56.25em) { .breadcrumbs { max-width: 750px; padding: 1.5em 0 0; } .overflow-container .breadcrumbs ~ .main { padding-top: 0.25em; } }
  .header-social { display: none; }
  .menu-social { display: flex; gap: 1em; padding: 0 5% 1.5em; justify-content: center; align-items: center; }
  .menu-primary p.menu-social-label { color: rgba(255,255,255,0.4); font-size: 0.7em; text-transform: uppercase; letter-spacing: 0.1em; text-align: center; padding: 0; padding-top: 1.25em; margin: 0.5em auto 0; border: none; display: block; width: 65%; border-top: solid 1px rgba(255,255,255,0.1); }
  .menu-social a { color: rgba(255,255,255,0.6); font-size: 1em; text-decoration: none; transition: color 0.2s ease; }
  .menu-social a:hover { color: var(--ignite-gold); }
  @media all and (min-width: 50em) {
    .menu-social, .menu-primary p.menu-social-label { display: none !important; }
    .header-social { display: flex; align-items: center; gap: 0.75em; flex-shrink: 0; margin-left: 0.5em; }
    .header-social a { color: var(--ignite-dark); font-size: 1.1em; text-decoration: none; opacity: 0.6; transition: opacity 0.2s ease, color 0.2s ease; }
    .header-social a:hover { opacity: 1; color: var(--ignite-gold); }
  }
  /* ===== Most Popular Cards (Articles page) ===== */
  .popular-section {
    padding-bottom: 16px;
    margin-bottom: 16px;
    border-bottom: 1px solid var(--ignite-border);
  }
  .popular-section .filter-label {
    display: block;
    margin-bottom: 10px;
  }
  .popular-cards {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
  }
  a.popular-card, a.popular-card:link, a.popular-card:visited {
    flex: 1;
    min-width: 180px;
    padding: 10px 14px;
    border: 1px solid var(--ignite-border);
    border-radius: var(--radius);
    text-decoration: none;
    display: flex;
    flex-direction: column;
    gap: 6px;
    background: var(--ignite-bg);
    color: var(--ignite-dark);
    transition: border-color 0.2s ease, box-shadow 0.2s ease;
  }
  a.popular-card:hover {
    border-color: var(--ignite-gold);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
  }
  .popular-card-title {
    color: var(--ignite-dark);
    font-size: 0.85em;
    font-weight: 600;
    line-height: 1.35;
  }
  .popular-card .lang-badge { align-self: flex-start; }
  body.dark a.popular-card, body.dark a.popular-card:link, body.dark a.popular-card:visited {
    background: #2a2b2f; border-color: #3a3b3f; color: #c9cdd1;
  }
  body.dark a.popular-card:hover {
    border-color: var(--ignite-gold); box-shadow: 0 2px 12px rgba(0, 0, 0, 0.25);
  }
  body.dark .popular-card-title { color: #c9cdd1; }
  /* ===== Projects Page ===== */
  .projects-container {
    background: white;
    margin: 1.5em auto;
    padding: 1.5em 24px 2.25em;
    max-width: 900px;
    border-radius: var(--radius);
  }
  .project-filter {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    gap: 8px;
    padding-bottom: 16px;
    margin-bottom: 24px;
    border-bottom: 1px solid var(--ignite-border);
  }
  .project-filter-btn {
    color: var(--ignite-gold-dark);
    border: 1px solid rgba(230, 161, 23, 0.35);
  }
  .project-filter-btn:hover {
    border-color: var(--ignite-gold);
    color: var(--ignite-gold);
  }
  .project-filter-btn.active {
    background: var(--ignite-gold);
    color: #fff;
    border-color: var(--ignite-gold);
  }
  .filter-count {
    font-size: 0.7rem;
    margin-left: 3px;
    padding: 1px 5px;
    border-radius: 4px;
    background: rgba(230, 161, 23, 0.15);
  }
  .project-filter-btn.active .filter-count {
    background: rgba(255, 255, 255, 0.25);
  }
  .project-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
  }
  .project-card {
    background: var(--ignite-bg);
    border-radius: var(--radius);
    padding: 1.25em;
    display: flex;
    flex-direction: column;
    text-decoration: none;
    color: var(--ignite-dark);
    transition: box-shadow 0.2s ease, transform 0.15s ease, border-color 0.2s ease;
    border: 1px solid transparent;
    position: relative;
  }
  a.project-card {
    border-color: var(--ignite-border);
    box-shadow: 0 1px 4px rgba(0, 0, 0, 0.04);
  }
  a.project-card:hover {
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
    transform: translateY(-2px);
    border-color: var(--ignite-gold);
  }
  a.project-card, a.project-card:link, a.project-card:visited {
    color: var(--ignite-dark);
    text-decoration: none;
  }
  .project-image {
    margin: 0.75em -1.25em 0 -1.25em;
    overflow: hidden;
  }
  .project-image img {
    width: 100%;
    height: auto;
    display: block;
    aspect-ratio: 16 / 9;
    object-fit: cover;
  }
  .project-body {
    flex: 1;
    display: flex;
    flex-direction: column;
  }
  .project-title {
    font-size: 1.05em;
    font-weight: 600;
    line-height: 1.4;
    margin: 0;
    text-align: center;
  }
  .project-link-icon {
    position: absolute;
    top: 1em;
    right: 1em;
    color: var(--ignite-gray);
    opacity: 0.4;
    transition: opacity 0.2s ease, color 0.2s ease;
  }
  a.project-card:hover .project-link-icon {
    opacity: 1;
    color: var(--ignite-gold);
  }
  .project-stat {
    font-size: 0.9em;
    font-weight: 600;
    color: var(--ignite-gold);
    margin-top: 0.4em;
  }
  .project-description {
    font-size: 0.85em;
    line-height: 1.55;
    color: var(--ignite-gray);
    margin: 0.5em 0;
    flex: 1;
  }
  .project-footer {
    display: flex;
    justify-content: space-between;
    align-items: baseline;
    margin-top: auto;
    padding-top: 0.5em;
    font-size: 0.75em;
    color: var(--ignite-gray);
    opacity: 0.7;
  }
  .project-categories {
    display: flex;
    flex-wrap: wrap;
    gap: 4px;
  }
  .project-cat-badge {
    font-size: 0.85em;
    padding: 1px 7px;
    border-radius: 3px;
    background: rgba(0, 0, 0, 0.05);
  }
  body.dark .project-cat-badge {
    background: rgba(255, 255, 255, 0.08);
  }
  .project-year {
    font-size: 1em;
  }
  .project-empty {
    text-align: center;
    padding: 3em 1em;
    color: var(--ignite-gray);
    font-size: 0.95em;
  }
  @media screen and (max-width: 640px) {
    .project-grid { grid-template-columns: 1fr; }
  }
  /* Projects dark mode */
  body.dark .projects-container { background: #25262a; }
  body.dark .project-card { background: #2a2b2f; color: #c9cdd1; border-color: transparent; }
  body.dark a.project-card, body.dark a.project-card:link, body.dark a.project-card:visited { color: #c9cdd1; border-color: #3a3b3f; box-shadow: 0 1px 4px rgba(0, 0, 0, 0.15); }
  body.dark a.project-card:hover { box-shadow: 0 4px 16px rgba(0, 0, 0, 0.35); border-color: var(--ignite-gold); }
  body.dark .project-title { color: #c9cdd1; }
  body.dark .project-description { color: #9a9b9d; }
  body.dark .project-filter-btn { background: #2a2b2f; color: #e0a060; border-color: #7a5530; }
  body.dark .project-filter-btn:hover { border-color: #e0a060; color: #e0a060; background: #3a3b3f; }
  body.dark .project-filter-btn.active { background: var(--ignite-gold); color: #fff; border-color: var(--ignite-gold); }
  body.dark .filter-count { background: rgba(255, 255, 255, 0.08); }
  body.dark .project-filter-btn.active .filter-count { background: rgba(255, 255, 255, 0.25); }
</style>

{{- /* Google Analytics GA4 + JSON-LD structured data */ -}}
{{- if eq .Site.Params.env "production" }}
<script async src="https://www.googletagmanager.com/gtag/js?id=G-YH9F0TF53Z"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-YH9F0TF53Z');
</script>
{{- partial "templates/schema_json.html" . }}
{{- end }}
