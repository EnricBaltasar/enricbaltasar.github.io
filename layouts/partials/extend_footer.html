<script src="https://cdn.jsdelivr.net/npm/glightbox/dist/js/glightbox.min.js"></script>
<script>
(function() {
  if (document.querySelector('.glightbox')) {
    GLightbox({ selector: '.glightbox', touchNavigation: false, keyboardNavigation: false });
    var style = document.createElement('style');
    style.textContent = '.gnext, .gprev { display: none !important; } .gclose { background: rgba(255,255,255,0.15) !important; border-radius: 4px !important; } .gclose svg { transform: scale(1.3); }';
    document.head.appendChild(style);
  }
})();
</script>

<script>
(function() {
  // Auto-link bare https:// URLs in comment content
  document.querySelectorAll('.comment-content').forEach(function(el) {
    el.innerHTML = el.innerHTML.replace(
      /(https?:\/\/[^\s<"]+)/g,
      '<a href="$1">$1</a>'
    );
  });
})();
</script>

<script>
(function() {
  // Friendly domains: target="_blank" WITHOUT noopener noreferrer
  var friendly = ['nakora.ai'];

  document.querySelectorAll('a[href]').forEach(function(a) {
    var href = a.getAttribute('href');
    if (!href || href.startsWith('#') || href.startsWith('/') || href.startsWith('mailto:')) return;
    try {
      var url = new URL(href, window.location.origin);
      if (url.origin === window.location.origin || url.hostname === 'enricbaltasar.com') return;
      // External link
      a.setAttribute('target', '_blank');
      var isFriendly = friendly.some(function(d) {
        return url.hostname === d || url.hostname.endsWith('.' + d);
      });
      if (isFriendly) {
        a.removeAttribute('rel');
      } else {
        a.setAttribute('rel', 'noopener noreferrer');
      }
    } catch(e) {}
  });
})();
</script>
